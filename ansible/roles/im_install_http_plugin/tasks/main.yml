---
### "ansible_architecture": "s390x",
### "ansible_architecture": "ppc64le",
### "ansible_architecture": "x86_64",
### "ansible_architecture": "chrp", --- AIX

#uninstall all
#IBM/InstallationManager/eclipse/tools/imcl uninstallAll

#clear install dirs
#rm -rf 

#install
#IBM/InstallationManager/eclipse/tools/imcl input ./im_http_plugin.xml -acceptLicense -secureStorageFile /home/nest/IBM/secureStorageFile.store

- name: check if imcl installed as a prereq
  stat:
    path: "{{ install_base }}/IBM/InstallationManager/eclipse/tools/imcl"
  register: isimcl

- block:
  - name: copy ihs_plugin.xml template
  template:
   src: im_http_plugin.xml.j2
   dest: "im_http_plugin.xml"
  when: isimcl.stat.exists == True
  failed_when: isimcl.stat.exists == False

# default install location: ~/IBM/InstallationManager/eclipse/tools
# tools command: ~/IBM/InstallationManager/eclipse/tools/imcl
#- name: ./userinstc -acceptLicense
#  shell: './userinstc -acceptLicense'
#  register: userinstcOutput
    
  #- name: userinstc output
  #debug: 
  # msg: "{{ userinstcOutput.stdout_lines }}"
