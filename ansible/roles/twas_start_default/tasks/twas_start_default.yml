---
- name: Start tWAS Server
  when: profile_type == 'managed' or profile_type == 'default'
  block:
    - name: Start the default tWAS Server
      ansible.builtin.shell: "{{install_base }}/{{ twas_dir }}/profiles/{{ profile_name }}/bin/startServer.sh {{ item }}"
      register: startDefaultOutput
      failed_when: ( startDefaultOutput.rc not in [ 0, 255 ] )
      with_items: "{{ appServerName }}"
    - name: startDefaultOutput ( lot of output )
      ansible.builtin.debug:
        msg: "{{ item.item }}"
      with_items: "{{ startDefaultOutput.results }}"
      failed_when: 
      - '"ADM*E" in item.stdout'
