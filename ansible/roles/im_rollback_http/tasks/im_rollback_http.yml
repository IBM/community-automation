---
- name: Find HTTP Rollback version
  ansible.builtin.include_role:
   name: im_rollback_find_version
  vars:
    was_product_dir: "{{ install_ihs_base }}/{{ http_dir }}"
    im_package_id: "{{ im_http_package[twas_release] }}"

- name: Rollback HTTP
  ansible.builtin.include_role:
   name: im_rollback_was_product
  vars:
    was_product_dir: "{{ install_ihs_base }}/{{ http_dir }}"
    im_package_id: "{{ im_http_package[twas_release] }}"
  when: rollback_version is defined

- name: Find Plugin Rollback version
  ansible.builtin.include_role:
   name: im_rollback_find_version {{ install_ihs_base }}/{{ plugin_dir }}
  vars:
    was_product_dir: "{{ install_ihs_base }}/{{ plugin_dir }}"
    im_package_id: "{{ im_plugin_package[twas_release] }}"

- name: Rollback Plugin
  ansible.builtin.include_role:
   name: im_rollback_was_product
  vars:
    was_product_dir: "{{ install_ihs_base }}/{{ plugin_dir }}"
    im_package_id: "{{ im_plugin_package[twas_release] }}"
  when: rollback_version is defined

- name: Find Plugin Rollback version
  ansible.builtin.include_role:
   name: im_rollback_find_version
  vars:
    was_product_dir: "{{ install_ihs_base }}/{{ wct_dir }}"
    im_package_id: "{{ im_wct_package[twas_release] }}"

- name: Rollback Plugin
  ansible.builtin.include_role:
   name: im_rollback_was_product
  vars:
    was_product_dir: "{{ install_ihs_base }}/{{ wct_dir }}"
    im_package_id: "{{ im_wct_package[twas_release] }}"
  when: rollback_version is defined